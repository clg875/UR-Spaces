{% extends 'base.html' %}
    {% block title %}
    <h1>Post</h1>
    {% endblock %}
    
    {% block content %}
    <main>
        <section class="box">
        <div class="forum-item">
            <a href="{{post.User_ID.get_url}}"> {{post.User_ID.User_ID.username}} </a>
            <span> {{post.post_date}} </span>
        </div>
        <div class="forum-item">
          <span> {{post.post_name}} </span>
        </div>
        <div class="forum-item">
          <span> {{post.contents}} </span>
        </div>
        <div class="post-item">
          <input type="button" value="Likes: 10" class="btn1"><i class="fa-regular fa-heart"></i>
          <p> Comments: {{post.num_comments}} </p>
          {%if  post.User_ID.User_ID.username  == request.user.username%}
          <form action="." method="POST">
            {% csrf_token %}
            <input type="submit" value="Delete Post" class="btn2" name="deletePost_btn" >
          </form>
          <input type="button" value="Edit Post" class="btn2">
          {%else%}
          <input type="button" value="Report User" class="btn2">
          {% endif %}
        
          <form action="." method="POST">
            {% csrf_token %}
            <section class="box">
            <div class="forum-item">
              <p> Edit Contents: </p>
            </div>
            <div class="forum-item">
              {{form.contents}}
            </div>
            {% if error %}
            <div class="forum-item">
                    <p style="color: red">Content cannot be blank.</p>
            </div>
            {%endif%}
            
            <div class="forum-item">
              <input type="submit" value="Submit" name="editPost_form">
            </div>
          </section>
        </form>

      </section>

      <!-- <button type="submit", name="addComment", value="addComment">Add Comment</button> -->
        
      {% for field in comments %}
        <section class="sub-box">
            <div class="forum-item">
              {%if  field.User_ID.User_ID.username  == request.user.username%}
                <a href="{% url 'profile' %}"> {{field.User_ID.User_ID.username}}  </a>
                {%else%} 
                <a href="{{field.User_ID.get_url}}"> {{field.User_ID.User_ID.username}}  </a>
                {% endif %} 
                <span> {{field.com_date}} </span>
            </div>
            <div class="forum-item">
              <span> {{field.com_contents}} </span>
            </div>
            <div class="post-item">
              <input type="button" value="Likes: 10" class="btn1"><i class="fa-regular fa-heart"></i>
              {%if  field.User_ID.User_ID.username  == request.user.username%}
            </div>
              <form action="." method="POST">
              {% csrf_token %}
              <input type="submit" value="Delete Comment" class="btn2" name="deleteComment_btn" >
              </form>
              <input type="button" value="Edit Comment" class="btn2">
              {%else%}
              <input type="button" value="Report User" class="btn2">
              {% endif %}

              <form action="." method="POST">
                {% csrf_token %}
                <section class="sub-box">
                <div class="forum-item">
                  <p> Edit Comment: </p>
                </div>
                <div class="forum-item">
                  {{commentform.com_contents}}

                </div>
                {% if error %}
                <div class="forum-item">
                        <p style="color: red">Comment cannot be blank.</p>
                </div>
                {%endif%}
                <div class="forum-item">
                  <input type="submit" value="Submit" name="editComment_form">
                </div>
              </section>
            </form>
          </section>
          {% endfor %}

          <form action="." method="POST">
            {% csrf_token %}
            <section class="sub-box">         
            <div class="forum-item">
              <textarea name="newContents"  cols="130" rows="3" placeholder="Input comment here..."></textarea>
            </div>
            <div class="forum-item">
              <input type="submit" value="Submit" name="newComment_form">
            </div>
          </section>
        </form>

    </main>
    {% endblock %}
